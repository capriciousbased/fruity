{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mdanisulhoquekhan/Desktop/fruity/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mdanisulhoquekhan/Desktop/fruity/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mdanisulhoquekhan/Desktop/fruity/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import SearchBar from\"./SearchBar\";import AvailableProductsTable from\"./AvailableProductsTable\";import ProductCard from\"./ProductCard\";import\"./AvailableProducts.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AvailableProducts=function AvailableProducts(props){var url=\"https://api.predic8.de\";var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),searchTerm=_useState4[0],setSearchTerm=_useState4[1];//get products from API\nvar getProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,allProducts,getPriceUrl,getPrice;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(url+\"/shop/products/\");case 2:res=_context.sent;allProducts=res.data.products;_context.next=6;return allProducts.map(function(product){return url+product.product_url;});case 6:getPriceUrl=_context.sent;_context.next=9;return getPriceUrl.map(function(url){return axios.get(url).then(function(res){return res.data;}).catch(function(err){return console.log(err);});});case 9:getPrice=_context.sent;axios.all(getPrice).then(function(res){return setProducts(res);});case 11:case\"end\":return _context.stop();}}},_callee);}));return function getProducts(){return _ref.apply(this,arguments);};}();var handleSearch=function handleSearch(event){setSearchTerm(event.target.value);};useEffect(function(){getProducts();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"table\",children:[/*#__PURE__*/_jsx(SearchBar,{products:products,onSearch:handleSearch,searchTerm:searchTerm}),/*#__PURE__*/_jsx(\"h1\",{children:\"List of available products\"}),/*#__PURE__*/_jsx(ProductCard,{searchTerm:searchTerm,products:products,url:url}),/*#__PURE__*/_jsx(\"h1\",{children:\"Product List\"}),/*#__PURE__*/_jsx(AvailableProductsTable,{searchTerm:searchTerm,products:products,url:url})]});};export default AvailableProducts;","map":{"version":3,"sources":["/Users/mdanisulhoquekhan/Desktop/fruity/src/components/AvailableProducts/AvailableProducts.js"],"names":["React","useState","useEffect","axios","SearchBar","AvailableProductsTable","ProductCard","AvailableProducts","props","url","products","setProducts","searchTerm","setSearchTerm","getProducts","get","res","allProducts","data","map","product","product_url","getPriceUrl","then","catch","err","console","log","getPrice","all","handleSearch","event","target","value"],"mappings":"2WAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,sBAAP,KAAmC,0BAAnC,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAO,yBAAP,C,wFAEA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,KAAD,CAAW,CACnC,GAAMC,CAAAA,GAAG,CAAG,wBAAZ,CADmC,cAGHR,QAAQ,CAAC,EAAD,CAHL,wCAG5BS,QAH4B,eAGlBC,WAHkB,8BAICV,QAAQ,CAAC,EAAD,CAJT,yCAI5BW,UAJ4B,eAIhBC,aAJgB,eAKnC;AACA,GAAMC,CAAAA,WAAW,0FAAG,kMACAX,CAAAA,KAAK,CAACY,GAAN,CAAUN,GAAG,CAAG,iBAAhB,CADA,QACZO,GADY,eAEZC,WAFY,CAEED,GAAG,CAACE,IAAJ,CAASR,QAFX,uBAIQO,CAAAA,WAAW,CAACE,GAAZ,CAAgB,SAACC,OAAD,CAAa,CACrD,MAAOX,CAAAA,GAAG,CAAGW,OAAO,CAACC,WAArB,CACD,CAFyB,CAJR,QAIZC,WAJY,qCAQKA,CAAAA,WAAW,CAACH,GAAZ,CAAgB,SAACV,GAAD,CAAS,CAC9C,MAAON,CAAAA,KAAK,CACTY,GADI,CACAN,GADA,EAEJc,IAFI,CAEC,SAACP,GAAD,QAASA,CAAAA,GAAG,CAACE,IAAb,EAFD,EAGJM,KAHI,CAGE,SAACC,GAAD,QAASC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EAHF,CAAP,CAID,CALsB,CARL,QAQZG,QARY,eAelBzB,KAAK,CAAC0B,GAAN,CAAUD,QAAV,EAAoBL,IAApB,CAAyB,SAACP,GAAD,QAASL,CAAAA,WAAW,CAACK,GAAD,CAApB,EAAzB,EAfkB,uDAAH,kBAAXF,CAAAA,WAAW,0CAAjB,CAkBA,GAAMgB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAC9BlB,aAAa,CAACkB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAb,CACD,CAFD,CAGA/B,SAAS,CAAC,UAAM,CACdY,WAAW,GACZ,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACE,aAAK,SAAS,CAAC,OAAf,wBACE,KAAC,SAAD,EACE,QAAQ,CAAEJ,QADZ,CAEE,QAAQ,CAAEoB,YAFZ,CAGE,UAAU,CAAElB,UAHd,EADF,cAME,kDANF,cAOE,KAAC,WAAD,EAAa,UAAU,CAAEA,UAAzB,CAAqC,QAAQ,CAAEF,QAA/C,CAAyD,GAAG,CAAED,GAA9D,EAPF,cAQE,oCARF,cASE,KAAC,sBAAD,EACE,UAAU,CAAEG,UADd,CAEE,QAAQ,CAAEF,QAFZ,CAGE,GAAG,CAAED,GAHP,EATF,GADF,CAiBD,CAhDD,CAkDA,cAAeF,CAAAA,iBAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport SearchBar from \"./SearchBar\";\nimport AvailableProductsTable from \"./AvailableProductsTable\";\nimport ProductCard from \"./ProductCard\";\nimport \"./AvailableProducts.css\";\n\nconst AvailableProducts = (props) => {\n  const url = \"https://api.predic8.de\";\n\n  const [products, setProducts] = useState([]);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  //get products from API\n  const getProducts = async () => {\n    const res = await axios.get(url + \"/shop/products/\");\n    const allProducts = res.data.products;\n\n    const getPriceUrl = await allProducts.map((product) => {\n      return url + product.product_url;\n    });\n    //promises for every url\n    const getPrice = await getPriceUrl.map((url) => {\n      return axios\n        .get(url)\n        .then((res) => res.data)\n        .catch((err) => console.log(err));\n    });\n\n    axios.all(getPrice).then((res) => setProducts(res));\n  };\n\n  const handleSearch = (event) => {\n    setSearchTerm(event.target.value);\n  };\n  useEffect(() => {\n    getProducts();\n  }, []);\n\n  return (\n    <div className=\"table\">\n      <SearchBar\n        products={products}\n        onSearch={handleSearch}\n        searchTerm={searchTerm}\n      />\n      <h1>List of available products</h1>\n      <ProductCard searchTerm={searchTerm} products={products} url={url} />\n      <h1>Product List</h1>\n      <AvailableProductsTable\n        searchTerm={searchTerm}\n        products={products}\n        url={url}\n      />\n    </div>\n  );\n};\n\nexport default AvailableProducts;\n"]},"metadata":{},"sourceType":"module"}